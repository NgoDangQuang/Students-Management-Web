(this["webpackJsonplearn-rtx-saga"]=this["webpackJsonplearn-rtx-saga"]||[]).push([[0],{373:function(e,t,n){},374:function(e,t,n){"use strict";n.r(t);var a=n(458),c=n(98),r=n(0),i=n.n(r),s=n(30),o=n.n(s),l=n(75),d=n(88),u=(n(251),n(43)),j=Object(u.a)(),b=n(2);var O=n(15),h=n(25);function x(e){return Boolean(localStorage.getItem("access_token"))?Object(b.jsx)(h.b,Object(O.a)({},e)):Object(b.jsx)(h.a,{to:"/login"})}var f=n(473),m=n(472),p=n(467),g=n(474),v=n(104),y=function(){return Object(l.d)()},k=l.e,w=n(50),S={isLoggedIn:!1,logging:!1,currentUser:void 0},C=Object(w.c)({name:"auth",initialState:S,reducers:{login:function(e,t){e.logging=!0},loginSuccess:function(e,t){e.logging=!1,e.currentUser=t.payload},loginFailed:function(e,t){e.logging=!1},logout:function(e){e.isLoggedIn=!1,e.currentUser=void 0}}}),_=C.actions,L=C.reducer;function B(){var e=y();return Object(b.jsx)(m.a,{sx:{flexGrow:1},children:Object(b.jsx)(f.a,{position:"static",children:Object(b.jsxs)(g.a,{children:[Object(b.jsx)(v.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Student Management"}),Object(b.jsx)(p.a,{color:"inherit",onClick:function(){e(_.logout())},children:"Logout"})]})})})}var F=n(441),A=n(444),N=n(446),I=n(478),M=n(465),R=n(442),D=n(443),P=n(445),W=n(52),z=Object(F.a)((function(e){return{link:{color:"inherit",textDecoration:"none","&.active > li":{backgroundColor:e.palette.action.selected}}}}));function E(){var e=z();return Object(b.jsx)(m.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:Object(b.jsx)("nav",{"aria-label":"main mailbox folders",children:Object(b.jsxs)(I.a,{children:[Object(b.jsx)(W.b,{to:"/admin/dashboard",className:e.link,children:Object(b.jsx)(M.a,{disablePadding:!0,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(D.a,{children:Object(b.jsx)(A.a,{})}),Object(b.jsx)(P.a,{primary:"Dashboard"})]})})}),Object(b.jsx)(W.b,{to:"/admin/students",className:e.link,children:Object(b.jsx)(M.a,{disablePadding:!0,children:Object(b.jsxs)(R.a,{children:[Object(b.jsx)(D.a,{children:Object(b.jsx)(N.a,{})}),Object(b.jsx)(P.a,{primary:"Students"})]})})})]})})})}function T(e){return Boolean(localStorage.getItem("access_token"))?Object(b.jsx)(h.a,{to:"/admin/dashboard"}):Object(b.jsx)(h.a,{to:"/login"})}var H=n(459),q=n(205),U=n.n(q),G=n(206),V=n.n(G),J=n(204),$=n.n(J),K=n(203),Q=n.n(K),X=n(486),Y=n(468),Z=n(479),ee=Object(F.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2),border:"1px solid ".concat(e.palette.divider)}}}));function te(e){var t=e.icon,n=e.label,a=e.value,c=ee();return Object(b.jsx)("div",{children:Object(b.jsxs)(Z.a,{className:c.root,children:[Object(b.jsx)(m.a,{children:t}),Object(b.jsxs)(m.a,{children:[Object(b.jsx)(v.a,{variant:"h5",align:"right",children:a}),Object(b.jsx)(v.a,{variant:"subtitle1",children:n})]})]})})}var ne=n(481),ae=n(485),ce=n(484),re=n(480),ie=n(482),se=n(483);function oe(e){var t=e.studentList;return Object(b.jsx)(re.a,{children:Object(b.jsxs)(ne.a,{size:"small","aria-label":"simple table",children:[Object(b.jsx)(ie.a,{children:Object(b.jsxs)(se.a,{children:[Object(b.jsx)(ce.a,{align:"center",children:"#"}),Object(b.jsx)(ce.a,{align:"left",children:"Name"}),Object(b.jsx)(ce.a,{align:"right",children:"Mark"})]})}),Object(b.jsx)(ae.a,{children:t.map((function(e,t){return Object(b.jsxs)(se.a,{children:[Object(b.jsx)(ce.a,{align:"center",children:t+1}),Object(b.jsx)(ce.a,{align:"left",children:e.name}),Object(b.jsx)(ce.a,{align:"right",children:e.mark})]},e.id)}))})]})})}var le=Object(F.a)((function(e){return{root:{padding:e.spacing(2),border:"1px solid ".concat(e.palette.divider)}}}));function de(e){var t=e.title,n=e.children,a=le();return Object(b.jsxs)(Z.a,{className:a.root,children:[Object(b.jsx)(v.a,{variant:"button",children:t}),Object(b.jsx)(m.a,{mt:2,children:n})]})}var ue=Object(w.c)({name:"dashboard",initialState:{loading:!1,statistics:{maleCount:0,femaleCount:0,highMarkCount:0,lowMarkCount:0},highestStudentList:[],lowestStudentList:[],rankingByCityList:[]},reducers:{fetchData:function(e){e.loading=!0},fetchDataSuccess:function(e){e.loading=!1},fetchDataFailed:function(e){e.loading=!1},setStatistics:function(e,t){e.statistics=t.payload},setHighestStudentList:function(e,t){e.highestStudentList=t.payload},setLowestStudentList:function(e,t){e.lowestStudentList=t.payload},setRankingByCityList:function(e,t){e.rankingByCityList=t.payload}}}),je=ue.actions,be=function(e){return e.dashboard.loading},Oe=function(e){return e.dashboard.statistics},he=function(e){return e.dashboard.highestStudentList},xe=function(e){return e.dashboard.lowestStudentList},fe=function(e){return e.dashboard.rankingByCityList},me=ue.reducer,pe=Object(F.a)((function(e){return{root:{position:"relative",paddingTop:e.spacing(2)},loading:{position:"absolute",top:e.spacing(-1)}}}));function ge(){var e=y(),t=k(be),n=k(Oe),a=k(he),c=k(xe),i=k(fe),s=pe();return r.useEffect((function(){e(je.fetchData())}),[e]),Object(b.jsxs)(m.a,{className:s.root,children:[t&&Object(b.jsx)(X.a,{className:s.loading}),Object(b.jsxs)(Y.a,{container:!0,spacing:3,children:[Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(te,{icon:Object(b.jsx)(Q.a,{fontSize:"large",color:"primary"}),label:"male",value:n.maleCount})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(te,{icon:Object(b.jsx)($.a,{fontSize:"large",color:"primary"}),label:"female",value:n.femaleCount})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(te,{icon:Object(b.jsx)(U.a,{fontSize:"large",color:"primary"}),label:"mark >= 8",value:n.highMarkCount})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(te,{icon:Object(b.jsx)(V.a,{fontSize:"large",color:"primary"}),label:"mark <= 5",value:n.lowMarkCount})})]}),Object(b.jsxs)(m.a,{mt:3,children:[Object(b.jsx)(v.a,{variant:"h4",children:"All Students"}),Object(b.jsx)(m.a,{mt:2,children:Object(b.jsxs)(Y.a,{container:!0,spacing:3,children:[Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(de,{title:"Student with highest mark",children:Object(b.jsx)(oe,{studentList:a})})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(de,{title:"Student with lowest mark",children:Object(b.jsx)(oe,{studentList:c})})})]})})]}),Object(b.jsxs)(m.a,{mt:3,children:[Object(b.jsx)(v.a,{variant:"h4",children:"Ranking By City"}),Object(b.jsx)(m.a,{mt:2,children:Object(b.jsx)(Y.a,{container:!0,spacing:3,children:i.map((function(e){return Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(de,{title:e.cityName,children:Object(b.jsx)(oe,{studentList:e.rankingList})})},e.cityId)}))})})]})]})}var ve=n(121),ye=Object(w.c)({name:"city",initialState:{loading:!1,list:[]},reducers:{fetchCityList:function(e){e.loading=!0},fetchCityListSuccess:function(e,t){e.loading=!1,e.list=t.payload.data},fetchCityListFailed:function(e){e.loading=!1}}}),ke=ye.actions,we=function(e){return e.city.list},Se=Object(ve.a)(we,(function(e){return e.reduce((function(e,t){return e[t.code]=t,e}),{})})),Ce=Object(ve.a)(we,(function(e){return e.map((function(e){return{label:e.name,value:e.code}}))})),_e=ye.reducer,Le=n(12),Be=n(27),Fe=n(16),Ae=n(452),Ne=n(207),Ie=n.n(Ne).a.create({baseURL:"http://js-post-api.herokuapp.com/api",headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),Ie.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var Me=Ie,Re={getAll:function(e){return Me.get("/students",{params:e})},getById:function(e){var t="/students/".concat(e);return Me.get(t)},add:function(e){return Me.post("/students",e)},update:function(e){var t="/students/".concat(e.id);return Me.patch(t,e)},remove:function(e){var t="/students/".concat(e);return Me.delete(t)}},De=n(214),Pe=n(464),We=n(495),ze=n(20),Ee=n(487),Te=n(46),He=["name","control","label"];function qe(e){var t=e.name,n=e.control,a=e.label,c=Object(ze.a)(e,He),r=Object(Te.d)({name:t,control:n}),i=r.field,s=i.value,o=i.onChange,l=i.onBlur,d=i.ref,u=r.fieldState,j=u.invalid,O=u.error;return Object(b.jsx)(Ee.a,{fullWidth:!0,size:"small",margin:"normal",value:s,onChange:o,onBlur:l,label:a,variant:"outlined",inputRef:d,error:j,helperText:null===O||void 0===O?void 0:O.message,inputProps:c})}var Ue=n(493),Ge=n(490),Ve=n(494),Je=n(448),$e=n(463),Ke=n(470);function Qe(e){var t=e.name,n=e.control,a=e.label,c=e.disabled,r=e.options,i=Object(Te.d)({name:t,control:n}),s=i.field,o=s.value,l=s.onChange,d=s.onBlur,u=i.fieldState,j=u.invalid,O=u.error;return Object(b.jsxs)(Ge.a,{disabled:c,margin:"normal",component:"fieldset",error:j,children:[Object(b.jsx)(Je.a,{component:"legend",children:a}),Object(b.jsx)(Ke.a,{row:!0,name:t,value:o,onChange:l,onBlur:d,children:r.map((function(e){return Object(b.jsx)(Ve.a,{value:e.value,control:Object(b.jsx)($e.a,{}),label:e.label},e.value)}))}),Object(b.jsx)(Ue.a,{children:null===O||void 0===O?void 0:O.message})]})}var Xe=n(460),Ye=n(471),Ze=n(491);function et(e){var t=e.name,n=e.control,a=e.label,c=e.disabled,r=e.options,i=Object(Te.d)({name:t,control:n}),s=i.field,o=s.value,l=s.onChange,d=s.onBlur,u=i.fieldState,j=u.invalid,O=u.error;return Object(b.jsxs)(Ge.a,{fullWidth:!0,variant:"outlined",margin:"normal",size:"small",disabled:c,error:j,children:[Object(b.jsx)(Ze.a,{id:"".concat(t,"_label"),children:a}),Object(b.jsx)(Xe.a,{labelId:"".concat(t,"_label"),value:o,onChange:l,onBlur:d,label:a,children:r.map((function(e){return Object(b.jsx)(Ye.a,{value:e.value,children:e.label},e.value)}))}),Object(b.jsx)(Ue.a,{children:null===O||void 0===O?void 0:O.message})]})}var tt=n(84),nt=tt.b().shape({name:tt.c().required().test("two-words","Please enter at least two words",(function(e){return!e||((null===e||void 0===e?void 0:e.split(" "))||[]).filter((function(e){return Boolean(e)})).length>=2})),age:tt.a().positive("Please enter a positive number.").min(18,"Min is 18").max(60,"Max is 60").integer("please enter an interger").required("please enter age.").typeError("Please enter a valid number."),mark:tt.a().min(0,"Min is 0").max(10,"Max is 10").required("Please enter mark.").typeError("Please enter a valid number."),gender:tt.c().oneOf(["male","female"],"Please select either male or female.").required("Please select gender."),city:tt.c().required("Please select city.")});function at(e){var t=e.initialValues,n=e.onSubmit,a=k(Ce),c=Object(r.useState)(""),i=Object(Fe.a)(c,2),s=i[0],o=i[1],l=Object(Te.e)({defaultValues:t,resolver:Object(De.a)(nt)}),d=l.control,u=l.handleSubmit,j=l.formState.isSubmitting,O=function(){var e=Object(Be.a)(Object(Le.a)().mark((function e(t){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(""),e.next=4,null===n||void 0===n?void 0:n(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to submit data");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(m.a,{maxWidth:400,children:Object(b.jsxs)("form",{onSubmit:u(O),children:[Object(b.jsx)(qe,{name:"name",control:d,label:"Full Name"}),Object(b.jsx)(Qe,{name:"gender",control:d,label:"Gender",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]}),Object(b.jsx)(qe,{name:"age",control:d,label:"Age",type:"number"}),Object(b.jsx)(qe,{name:"mark",control:d,label:"Mark",type:"number"}),Array.isArray(a)&&a.length>0&&Object(b.jsx)(et,{name:"city",control:d,label:"City",options:a}),s&&Object(b.jsx)(Pe.a,{severity:"error",children:s}),Object(b.jsx)(m.a,{mt:3,children:Object(b.jsxs)(p.a,{type:"submit",variant:"contained",color:"primary",disabled:j,children:[j&&Object(b.jsx)(We.a,{size:16,color:"primary"}),"\xa0Save"]})})]})})}function ct(){var e=Object(h.g)(),t=Object(h.h)().studentId,n=Boolean(t),a=Object(r.useState)(),c=Object(Fe.a)(a,2),i=c[0],s=c[1];Object(r.useEffect)((function(){t&&Object(Be.a)(Object(Le.a)().mark((function e(){var n;return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.getById(t);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Faile to fetch student details",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[t]);var o=function(){var t=Object(Be.a)(Object(Le.a)().mark((function t(a){return Object(Le.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,Re.update(a);case 3:t.next=7;break;case 5:return t.next=7,Re.add(a);case 7:Object(d.b)("\ud83e\udd84 Save student successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.push("/admin/students");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=Object(O.a)({name:"",age:"",mark:"",gender:"male",city:""},i);return Object(b.jsxs)(m.a,{children:[Object(b.jsx)(W.a,{to:"/admin/students",children:Object(b.jsxs)(v.a,{variant:"caption",style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)(Ae.a,{})," Back to student list"]})}),Object(b.jsx)(v.a,{variant:"h4",children:n?"Update student info":"Add new student"}),(!n||Boolean(i))&&Object(b.jsx)(m.a,{mt:3,children:Object(b.jsx)(at,{initialValues:l,onSubmit:o})})]})}var rt=n(462),it=n(453),st=n(469);function ot(e){var t=e.filter,n=e.cityList,a=e.onChange,c=e.onSearchChange,i=Object(r.useRef)();return Object(b.jsx)(m.a,{children:Object(b.jsxs)(Y.a,{container:!0,spacing:3,children:[Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,children:Object(b.jsxs)(Ge.a,{fullWidth:!0,variant:"outlined",size:"small",children:[Object(b.jsx)(Ze.a,{htmlFor:"searchByName",children:"Search by name"}),Object(b.jsx)(st.a,{id:"SearchByName",endAdornment:Object(b.jsx)(it.a,{}),label:"Search by name",onChange:function(e){if(c){var n=Object(O.a)(Object(O.a)({},t),{},{_page:1,name_like:e.target.value});c(n)}},inputRef:i})]})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsxs)(Ge.a,{fullWidth:!0,size:"small",children:[Object(b.jsx)(Ze.a,{id:"filterByCity",children:"Filter by city"}),Object(b.jsxs)(Xe.a,{labelId:"filterByCity",label:"Filter by city",value:t.city||"",onChange:function(e){if(a){var n=Object(O.a)(Object(O.a)({},t),{},{_page:1,city:e.target.value||void 0});a(n)}},children:[Object(b.jsx)(Ye.a,{value:"",children:Object(b.jsx)("em",{children:"All"})}),n.map((function(e){return Object(b.jsx)(Ye.a,{value:e.code,children:e.name},e.code)}))]})]})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:2,children:Object(b.jsxs)(Ge.a,{fullWidth:!0,size:"small",children:[Object(b.jsx)(Ze.a,{id:"sortBy",children:"Sort"}),Object(b.jsxs)(Xe.a,{labelId:"sortBy",value:t._sort?"".concat(t._sort,".").concat(t._order):"",onChange:function(e){if(a){var n=e.target.value.split("."),c=Object(Fe.a)(n,2),r=c[0],i=c[1],s=Object(O.a)(Object(O.a)({},t),{},{_sort:r||void 0,_order:i||void 0});a(s)}},label:"Sort",children:[Object(b.jsx)(Ye.a,{value:"",children:Object(b.jsx)("em",{children:"No sort"})}),Object(b.jsx)(Ye.a,{value:"name.asc",children:"Name ASC"}),Object(b.jsx)(Ye.a,{value:"name.desc",children:"Name DESC"}),Object(b.jsx)(Ye.a,{value:"mark.asc",children:"Mark ASC"}),Object(b.jsx)(Ye.a,{value:"mark.desc",children:"Mark DESC"})]})]})}),Object(b.jsx)(Y.a,{item:!0,xs:12,md:6,lg:1,children:Object(b.jsx)(p.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){if(a){var e=Object(O.a)(Object(O.a)({},t),{},{_page:1,_sort:void 0,_order:void 0,city:void 0,name_like:void 0});a(e),i.current&&(i.current.value="")}},children:"Clear"})})]})})}var lt=n(496),dt=n(499),ut=n(497),jt=n(498),bt=n(454);function Ot(e){var t=e.studentList,n=e.cityMap,a=e.onEdit,c=e.onRemove,i=Object(r.useState)(!1),s=Object(Fe.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(),u=Object(Fe.a)(d,2),j=u[0],O=u[1],h=function(){l(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(re.a,{component:Z.a,children:Object(b.jsxs)(ne.a,{size:"small","aria-label":"simple table",children:[Object(b.jsx)(ie.a,{children:Object(b.jsxs)(se.a,{children:[Object(b.jsx)(ce.a,{children:"ID"}),Object(b.jsx)(ce.a,{children:"Name"}),Object(b.jsx)(ce.a,{children:"Gender"}),Object(b.jsx)(ce.a,{children:"Mark"}),Object(b.jsx)(ce.a,{children:"City"}),Object(b.jsx)(ce.a,{align:"right",children:"Actions"})]})}),Object(b.jsx)(ae.a,{children:t.map((function(e,t){var c,r,i;return Object(b.jsxs)(se.a,{children:[Object(b.jsx)(ce.a,{children:e.id}),Object(b.jsx)(ce.a,{children:e.name}),Object(b.jsx)(ce.a,{children:(i=e.gender,i?"".concat(i[0].toUpperCase()).concat(i.slice(1)):"")}),Object(b.jsx)(ce.a,{children:Object(b.jsx)(m.a,{color:(r=e.mark,r>=8?"green":r>=4?"goldenrod":"red"),fontWeight:"bold",children:e.mark})}),Object(b.jsx)(ce.a,{children:null===(c=n[e.city])||void 0===c?void 0:c.name}),Object(b.jsxs)(ce.a,{align:"right",children:[Object(b.jsx)(p.a,{sx:{marginRight:"8px"},size:"small",color:"primary",onClick:function(){return null===a||void 0===a?void 0:a(e)},children:"Edit"}),Object(b.jsx)(p.a,{size:"small",color:"secondary",onClick:function(){return function(e){O(e),l(!0)}(e)},children:"Remove"})]})]},e.id)}))})]})}),Object(b.jsxs)(lt.a,{open:o,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(b.jsx)(bt.a,{id:"alert-dialog-title",children:"Remove a student?"}),Object(b.jsx)(ut.a,{children:Object(b.jsxs)(jt.a,{id:"alert-dialog-description",children:['Are you sure to remove student named "',null===j||void 0===j?void 0:j.name,'".',Object(b.jsx)("br",{}),"This action can't be undo"]})}),Object(b.jsxs)(dt.a,{children:[Object(b.jsx)(p.a,{onClick:h,variant:"outlined",children:"Cancel"}),Object(b.jsx)(p.a,{onClick:function(){return e=j,null===c||void 0===c||c(e),void l(!1);var e},color:"secondary",variant:"contained",autoFocus:!0,children:"Remove"})]})]})]})}var ht=Object(w.c)({name:"student",initialState:{loading:!1,list:[],filter:{_page:1,_limit:15},pagination:{_page:1,_limit:15,_totalRows:15}},reducers:{fetchStudentList:function(e,t){e.loading=!0},fetchStudentListSuccess:function(e,t){e.list=t.payload.data,e.pagination=t.payload.pagination,e.loading=!1},fetchStudentListFailed:function(e){e.loading=!1},setFilter:function(e,t){e.filter=t.payload},setFilterWithDebounce:function(e,t){}}}),xt=ht.actions,ft=function(e){return e.student.list},mt=function(e){return e.student.loading},pt=function(e){return e.student.filter},gt=function(e){return e.student.pagination},vt=ht.reducer,yt=Object(F.a)((function(e){return{root:{position:"relative",paddingTo:e.spacing(1)},titleContainer:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(4)},loading:{position:"absolute",top:e.spacing(-1),width:"100%"}}}));function kt(){var e=Object(h.i)(),t=Object(h.g)(),n=k(ft),a=k(gt),c=k(pt),i=k(mt),s=k(Se),o=k(we),l=y(),u=yt();Object(r.useEffect)((function(){l(xt.fetchStudentList(c))}),[l,c]);var j=function(){var e=Object(Be.a)(Object(Le.a)().mark((function e(t){var n;return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.remove((null===t||void 0===t?void 0:t.id)||"");case 3:Object(d.b)("\ud83e\udd84 Remove student successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),n=Object(O.a)({},c),l(xt.setFilter(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to fetch student",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var n=Object(Be.a)(Object(Le.a)().mark((function n(a){return Object(Le.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.push("".concat(e.url,"/").concat(a.id));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsxs)(m.a,{className:u.root,children:[i&&Object(b.jsx)(X.a,{className:u.loading}),Object(b.jsxs)(m.a,{className:u.titleContainer,children:[Object(b.jsx)(v.a,{variant:"h4",children:"Students"}),Object(b.jsx)(W.a,{to:"".concat(e.url,"/add"),style:{textDecoration:"none"},children:Object(b.jsx)(p.a,{variant:"contained",color:"primary",children:"Add new student"})})]}),Object(b.jsx)(m.a,{mb:3,children:Object(b.jsx)(ot,{filter:c,cityList:o,onSearchChange:function(e){l(xt.setFilterWithDebounce(e))},onChange:function(e){l(xt.setFilter(e))}})}),Object(b.jsx)(Ot,{studentList:n,cityMap:s,onRemove:j,onEdit:x}),Object(b.jsx)(m.a,{mt:2,display:"flex",justifyContent:"center",children:Object(b.jsx)(rt.a,{color:"primary",count:Math.ceil(a._totalRows/a._limit),page:null===a||void 0===a?void 0:a._page,onChange:function(e,t){l(xt.setFilter(Object(O.a)(Object(O.a)({},c),{},{_page:t})))}})})]})}function wt(){var e=Object(h.i)(),t=y();return Object(r.useEffect)((function(){t(ke.fetchCityList())}),[t]),Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{path:e.path,exact:!0,children:Object(b.jsx)(kt,{})}),Object(b.jsx)(h.b,{path:"".concat(e.path,"/add"),children:Object(b.jsx)(ct,{})}),Object(b.jsx)(h.b,{path:"".concat(e.path,"/:studentId"),children:Object(b.jsx)(ct,{})})]})}var St=Object(F.a)((function(e){return{root:{display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"240px 1fr",gridTemplateAreas:'"header header" "sidebar main"',minHeight:"100vh"},header:{gridArea:"header"},sidebar:{gridArea:"sidebar",borderRight:"1px solid ".concat(e.palette.divider),backgroundColor:e.palette.background.paper},main:{gridArea:"main",backgroundColor:e.palette.background.paper,padding:e.spacing(2,3)}}}));function Ct(){var e=St();return Object(b.jsxs)(H.a,{className:e.root,children:[Object(b.jsx)(H.a,{className:e.header,children:Object(b.jsx)(B,{})}),Object(b.jsx)(H.a,{className:e.sidebar,children:Object(b.jsx)(E,{})}),Object(b.jsx)(H.a,{className:e.main,children:Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{path:"/admin/dashboard",children:Object(b.jsx)(ge,{})}),Object(b.jsx)(h.b,{path:"/admin/students",children:Object(b.jsx)(wt,{})})]})})]})}var _t=n(451),Lt=n(455),Bt=n(456),Ft=n(457),At=Object(F.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center",minHeight:"100vh"},box:{padding:e.spacing(3)},btn:{marginTop:"24px"}}}));function Nt(){var e=At(),t=y(),n=k((function(e){return e.auth.logging}));return Object(b.jsx)("div",{className:e.root,children:Object(b.jsxs)(_t.a,{elevation:1,className:e.box,children:[Object(b.jsx)(Lt.a,{variant:"h5",component:"h1",children:"Student Management"}),Object(b.jsx)(H.a,{className:e.btn,children:Object(b.jsxs)(Bt.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){t(_.login({username:"",password:""}))},children:["Fake Login \xa0",n&&Object(b.jsx)(Ft.a,{size:16,color:"inherit"})]})})]})})}var It=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{path:"/login",children:Object(b.jsx)(Nt,{})}),Object(b.jsx)(x,{path:"/admin",children:Object(b.jsx)(Ct,{})}),Object(b.jsx)(h.b,{children:Object(b.jsx)(T,{})})]})})},Mt=n(55),Rt=n(195),Dt=n(213);function Pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Wt=Object(w.b)("counter/fetchCount",function(){var e=Object(Be.a)(Object(Le.a)().mark((function e(t){var n;return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),zt=Object(w.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload},incrementSaga:function(e,t){e.status="loading"},incrementSagaSuccess:function(e,t){e.status="idle",e.value+=t.payload}},extraReducers:function(e){e.addCase(Wt.pending,(function(e){e.status="loading"})).addCase(Wt.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload})).addCase(Wt.rejected,(function(e){e.status="failed"}))}}),Et=zt.actions,Tt=(Et.increment,Et.decrement,Et.incrementByAmount,Et.incrementSaga),Ht=Et.incrementSagaSuccess,qt=zt.reducer,Ut=n(39),Gt=n(18),Vt=Object(Le.a)().mark(Qt),Jt=Object(Le.a)().mark(Xt),$t=Object(Le.a)().mark(Yt),Kt=Object(Le.a)().mark(Zt);function Qt(e){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Gt.d)(1e3);case 3:return localStorage.setItem("access_token","fake_token"),e.next=6,Object(Gt.f)(_.loginSuccess({id:1,name:"Easy Frontend"}));case 6:return e.next=8,Object(Gt.f)(Object(Ut.d)("./admin/dashboard"));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Gt.f)(_.loginFailed("Error Login"));case 14:case"end":return e.stop()}}),Vt,null,[[0,10]])}function Xt(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.d)(500);case 2:return localStorage.removeItem("access_token"),e.next=5,Object(Gt.f)(Object(Ut.d)("./login"));case 5:case"end":return e.stop()}}),Jt)}function Yt(){var e;return Object(Le.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(localStorage.getItem("access_token"))){t.next=8;break}return t.next=5,Object(Gt.g)(_.login.type);case 5:return e=t.sent,t.next=8,Object(Gt.e)(Qt,e.payload);case 8:return t.next=10,Object(Gt.g)(_.logout.type);case 10:return t.next=12,Object(Gt.b)(Xt);case 12:t.next=0;break;case 14:case"end":return t.stop()}}),$t)}function Zt(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.e)(Yt);case 2:case"end":return e.stop()}}),Kt)}var en={getAll:function(){return Me.get("/cities",{params:{_page:1,_limit:10}})}},tn=Object(Le.a)().mark(an),nn=Object(Le.a)().mark(cn);function an(){var e;return Object(Le.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Gt.b)(en.getAll);case 3:return e=t.sent,t.next=6,Object(Gt.f)(ke.fetchCityListSuccess(e));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log("Failed to fetch city list",t.t0),t.next=13,Object(Gt.f)(ke.fetchCityListFailed());case 13:case"end":return t.stop()}}),tn,null,[[0,8]])}function cn(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.i)(ke.fetchCityList.type,an);case 2:case"end":return e.stop()}}),nn)}var rn=Object(Le.a)().mark(on),sn=Object(Le.a)().mark(ln);function on(e){return Object(Le.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Waiting 2s"),t.next=3,Object(Gt.b)(Gt.d,1e3);case 3:return console.log("Dispatch action"),t.next=6,Object(Gt.f)(Ht(e.payload));case 6:case"end":return t.stop()}}),rn)}function ln(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.h)(Tt.toString(),on);case 2:case"end":return e.stop()}}),sn)}var dn=Object(Le.a)().mark(xn),un=Object(Le.a)().mark(fn),jn=Object(Le.a)().mark(mn),bn=Object(Le.a)().mark(pn),On=Object(Le.a)().mark(gn),hn=Object(Le.a)().mark(vn);function xn(){var e,t,n,a,c,r,i;return Object(Le.a)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Gt.a)([Object(Gt.b)(Re.getAll,{_page:1,_limit:1,gender:"male"}),Object(Gt.b)(Re.getAll,{_page:1,_limit:1,gender:"female"}),Object(Gt.b)(Re.getAll,{_page:1,_limit:1,mark_gte:8}),Object(Gt.b)(Re.getAll,{_page:1,_limit:1,mark_lte:5})]);case 2:return e=s.sent,t=e.map((function(e){return e.pagination._totalRows})),n=Object(Fe.a)(t,4),a=n[0],c=n[1],r=n[2],i=n[3],s.next=7,Object(Gt.f)(je.setStatistics({maleCount:a,femaleCount:c,highMarkCount:r,lowMarkCount:i}));case 7:case"end":return s.stop()}}),dn)}function fn(){var e,t;return Object(Le.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Gt.b)(Re.getAll,{_page:1,_limit:5,_sort:"mark",_order:"desc"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Gt.f)(je.setHighestStudentList(t));case 6:case"end":return n.stop()}}),un)}function mn(){var e,t;return Object(Le.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Gt.b)(Re.getAll,{_page:1,_limit:5,_sort:"mark",_order:"asc"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Gt.f)(je.setLowestStudentList(t));case 6:case"end":return n.stop()}}),jn)}function pn(){var e,t,n,a,c;return Object(Le.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Gt.b)(en.getAll);case 2:return e=r.sent,t=e.data,n=t.map((function(e){return Object(Gt.b)(Re.getAll,{_page:1,_limit:5,_sort:"mark",_order:"desc",city:e.code})})),r.next=7,Object(Gt.a)(n);case 7:return a=r.sent,c=a.map((function(e,n){return{cityId:t[n].code,cityName:t[n].name,rankingList:e.data}})),r.next=11,Object(Gt.f)(je.setRankingByCityList(c));case 11:case"end":return r.stop()}}),bn)}function gn(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Gt.a)([Object(Gt.b)(xn),Object(Gt.b)(fn),Object(Gt.b)(mn),Object(Gt.b)(pn)]);case 3:return e.next=5,Object(Gt.f)(je.fetchDataSuccess());case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("Failed to fetch dashboard data",e.t0),e.next=12,Object(Gt.f)(je.fetchDataSuccess());case 12:case"end":return e.stop()}}),On,null,[[0,7]])}function vn(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.i)(je.fetchData.type,gn);case 2:case"end":return e.stop()}}),hn)}var yn=Object(Le.a)().mark(Sn),kn=Object(Le.a)().mark(Cn),wn=Object(Le.a)().mark(_n);function Sn(e){var t;return Object(Le.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Gt.b)(Re.getAll,e.payload);case 3:return t=n.sent,n.next=6,Object(Gt.f)(xt.fetchStudentListSuccess(t));case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.log("Failed to fetch student list",n.t0),n.next=13,Object(Gt.f)(xt.fetchStudentListFailed());case 13:case"end":return n.stop()}}),yn,null,[[0,8]])}function Cn(e){return Object(Le.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Gt.f)(xt.setFilter(e.payload));case 2:case"end":return t.stop()}}),kn)}function _n(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.i)(xt.fetchStudentList,Sn);case 2:return e.next=4,Object(Gt.c)(500,xt.setFilterWithDebounce.type,Cn);case 4:case"end":return e.stop()}}),wn)}var Ln=Object(Le.a)().mark(Bn);function Bn(){return Object(Le.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.a)([ln(),Zt(),vn(),_n(),cn()]);case 2:case"end":return e.stop()}}),Ln)}var Fn=Object(Mt.b)({router:Object(c.b)(j),counter:qt,auth:L,dashboard:me,student:vt,city:_e}),An=Object(Dt.a)(),Nn=Object(w.a)({reducer:Fn,middleware:function(e){return e().concat(An,Object(Rt.a)(j))}});An.run(Bn);n(373),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsxs)(l.a,{store:Nn,children:[Object(b.jsxs)(c.a,{history:j,children:[Object(b.jsx)(a.a,{}),Object(b.jsx)(It,{})]}),Object(b.jsx)(d.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[374,1,2]]]);
//# sourceMappingURL=main.241df4dd.chunk.js.map